<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Delivery Lanchonete</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding-bottom: 60px;
    background: #f0f0f0;
  }

  header {
    background: #ff6f00;
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 24px;
    font-weight: bold;
  }

  /* Bot√£o carrinho fixo no canto inferior direito */
  #botao-carrinho {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 50%;
    width: 56px;
    height: 56px;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 3px 6px rgba(0,0,0,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
  }
  #badge-carrinho {
    position: absolute;
    top: 6px;
    right: 6px;
    background: red;
    border-radius: 50%;
    color: white;
    font-size: 12px;
    padding: 2px 6px;
  }

  /* Carrinho tela cheia */
  #carrinho {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: white;
    z-index: 9999;
    flex-direction: column;
    padding: 20px;
    overflow-y: auto;
  }
  #carrinho.show {
    display: flex;
  }

  .fechar-carrinho {
    position: absolute;
    top: 15px; right: 15px;
    background: none;
    border: none;
    font-size: 32px;
    cursor: pointer;
  }

  h2 {
    margin-top: 50px;
    margin-bottom: 20px;
    text-align: center;
  }

  #itens-carrinho {
    flex-grow: 1;
    overflow-y: auto;
  }

  .item-carrinho {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid #ddd;
  }

  .controles-quantidade button {
    margin: 0 4px;
    padding: 4px 10px;
    font-size: 16px;
    cursor: pointer;
  }

  label {
    font-weight: bold;
    margin-top: 15px;
    display: block;
  }
  select, input[type=text], input[type=datetime-local], input[type=number] {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    box-sizing: border-box;
  }

  #btn-finalizar {
    margin-top: 20px;
    padding: 15px;
    background: #28a745;
    color: white;
    font-size: 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }

  /* Estilos para campos que aparecem/desaparecem */
  #campo-endereco, #info-retirada, #campo-agendamento,
  #campo-troco, #campo-pix {
    margin-top: 10px;
    display: none;
  }

  /* Lista de produtos simples */
  #lista-produtos {
    padding: 10px 20px 80px;
  }
  .produto {
    background: white;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgb(0 0 0 / 0.1);
  }
  .produto h3 {
    margin: 0 0 10px;
  }
  .produto p {
    margin: 0 0 10px;
  }
  .produto button {
    background: #ff6f00;
    color: white;
    border: none;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 6px;
    cursor: pointer;
  }

  /* Responsividade */
  @media (max-width: 600px) {
    #btn-finalizar {
      font-size: 22px;
      padding: 18px;
    }
  }
</style>
</head>
<body>

<header>Minha Lanchonete</header>

<section id="lista-produtos">
  <div class="produto" data-nome="X-Burguer" data-preco="15.50">
    <h3>X-Burguer</h3>
    <p>Delicioso hamb√∫rguer artesanal.</p>
    <button class="btn-adicionar">Adicionar</button>
  </div>
  <div class="produto" data-nome="Cachorro Quente" data-preco="12.00">
    <h3>Cachorro Quente</h3>
    <p>Salsicha com molho especial.</p>
    <button class="btn-adicionar">Adicionar</button>
  </div>
  <div class="produto" data-nome="Refrigerante Lata" data-preco="5.00">
    <h3>Refrigerante Lata</h3>
    <p>350ml de refresco gelado.</p>
    <button class="btn-adicionar">Adicionar</button>
  </div>
</section>

<!-- Bot√£o carrinho fixo -->
<button id="botao-carrinho" title="Abrir carrinho">
  üõí <span id="badge-carrinho" style="display:none">0</span>
</button>

<!-- Carrinho em tela cheia -->
<div id="carrinho" role="dialog" aria-modal="true" aria-labelledby="titulo-carrinho">
  <button class="fechar-carrinho" id="fechar-carrinho" aria-label="Fechar carrinho">√ó</button>
  <h2 id="titulo-carrinho">Seu Pedido</h2>
  <div id="itens-carrinho">Carrinho vazio</div>

  <label for="tipo-entrega">Tipo de Entrega:</label>
  <select id="tipo-entrega" required>
    <option value="">Selecione</option>
    <option value="delivery">Delivery</option>
    <option value="retirar">Retirar no balc√£o</option>
    <option value="agendamento">Agendamento</option>
  </select>

  <div id="campo-endereco">
    <input type="text" id="endereco" placeholder="Digite o endere√ßo para entrega" />
  </div>
  <div id="info-retirada">
    <p>Retire seu pedido no endere√ßo: Rua das Laranjeiras, 123 - Centro</p>
  </div>
  <div id="campo-agendamento">
    <input type="datetime-local" id="data-agendamento" />
  </div>

  <label for="tipo-pagamento">Forma de Pagamento:</label>
  <select id="tipo-pagamento" required>
    <option value="">Selecione</option>
    <option value="pix">Pix</option>
    <option value="cartao">Cart√£o</option>
    <option value="dinheiro">Dinheiro</option>
  </select>

  <div id="campo-troco">
    <input type="number" id="troco-para" placeholder="Valor para troco" min="0" step="0.01" />
  </div>

  <div id="campo-pix">
    <input type="text" id="chave-pix" value="meu-pix@exemplo.com" readonly />
    <button id="btn-copiar-pix">Copiar chave Pix</button>
  </div>

  <button id="btn-finalizar">Finalizar Pedido</button>
</div>

<script>
  // Estado do carrinho
  let carrinho = [];

  const botaoCarrinho = document.getElementById("botao-carrinho");
  const badgeCarrinho = document.getElementById("badge-carrinho");
  const carrinhoEl = document.getElementById("carrinho");
  const fecharCarrinhoBtn = document.getElementById("fechar-carrinho");
  const itensCarrinhoEl = document.getElementById("itens-carrinho");

  const tipoEntregaEl = document.getElementById("tipo-entrega");
  const campoEnderecoEl = document.getElementById("campo-endereco");
  const infoRetiradaEl = document.getElementById("info-retirada");
  const campoAgendamentoEl = document.getElementById("campo-agendamento");

  const tipoPagamentoEl = document.getElementById("tipo-pagamento");
  const campoTrocoEl = document.getElementById("campo-troco");
  const campoPixEl = document.getElementById("campo-pix");
  const btnCopiarPix = document.getElementById("btn-copiar-pix");

  const btnFinalizar = document.getElementById("btn-finalizar");

  // Atualiza badge carrinho e lista de itens no carrinho
  function atualizarCarrinho() {
    if (carrinho.length === 0) {
      badgeCarrinho.style.display = "none";
      itensCarrinhoEl.textContent = "Carrinho vazio";
      return;
    }

    badgeCarrinho.style.display = "inline-block";
    let totalItens = 0;
    itensCarrinhoEl.innerHTML = "";

    carrinho.forEach((item, index) => {
      totalItens += item.quantidade;
      const divItem = document.createElement("div");
      divItem.className = "item-carrinho";
      divItem.innerHTML = `
        <div>
          <strong>${item.nome}</strong><br />
          R$ ${item.preco.toFixed(2)} x ${item.quantidade}
        </div>
        <div class="controles-quantidade">
          <button data-index="${index}" class="diminuir">-</button>
          <button data-index="${index}" class="aumentar">+</button>
          <button data-index="${index}" class="remover">x</button>
        </div>
      `;
      itensCarrinhoEl.appendChild(divItem);
    });

    badgeCarrinho.textContent = totalItens;

    // Adiciona eventos dos bot√µes dentro do carrinho
    itensCarrinhoEl.querySelectorAll(".diminuir").forEach(btn => {
      btn.onclick = () => {
        const idx = Number(btn.getAttribute("data-index"));
        if (carrinho[idx].quantidade > 1) {
          carrinho[idx].quantidade--;
        } else {
          carrinho.splice(idx, 1);
        }
        atualizarCarrinho();
      };
    });

    itensCarrinhoEl.querySelectorAll(".aumentar").forEach(btn => {
      btn.onclick = () => {
        const idx = Number(btn.getAttribute("data-index"));
        carrinho[idx].quantidade++;
        atualizarCarrinho();
      };
    });

    itensCarrinhoEl.querySelectorAll(".remover").forEach(btn => {
      btn.onclick = () => {
        const idx = Number(btn.getAttribute("data-index"));
        carrinho.splice(idx, 1);
        atualizarCarrinho();
      };
    });
  }

  // Abrir carrinho
  botaoCarrinho.onclick = () => {
    if (carrinho.length === 0) {
      alert("Carrinho vazio!");
      return;
    }
    carrinhoEl.classList.add("show");
  };

  // Fechar carrinho
  fecharCarrinhoBtn.onclick = () => {
    carrinhoEl.classList.remove("show");
  };

  // Adicionar produto ao carrinho
  document.querySelectorAll(".btn-adicionar").forEach(btn => {
    btn.onclick = () => {
      const produtoEl = btn.closest(".produto");
      const nome = produtoEl.getAttribute("data-nome");
      const preco = parseFloat(produtoEl.getAttribute("data-preco"));

      // Se j√° existe no carrinho, aumenta quantidade
      const indexExistente = carrinho.findIndex(i => i.nome === nome);
      if (indexExistente >= 0) {
        carrinho[indexExistente].quantidade++;
      } else {
        carrinho.push({nome, preco, quantidade:1});
      }
      atualizarCarrinho();
      alert(nome + " adicionado ao carrinho!");
    };
  });

  // Mostrar campos de entrega conforme sele√ß√£o
  tipoEntregaEl.onchange = () => {
    const val = tipoEntregaEl.value;
    campoEnderecoEl.style.display = val === "delivery" ? "block" : "none";
    infoRetiradaEl.style.display = val === "retirar" ? "block" : "none";
    campoAgendamentoEl.style.display = val === "agendamento" ? "block" : "none";
  };

  // Mostrar campos pagamento conforme sele√ß√£o
  tipoPagamentoEl.onchange = () => {
    const val = tipoPagamentoEl.value;
    campoTrocoEl.style.display = val === "dinheiro" ? "block" : "none";
    campoPixEl.style.display = val === "pix" ? "block" : "none";
  };

  // Copiar chave Pix
  btnCopiarPix.onclick = () => {
    const pix = document.getElementById("chave-pix").value;
    navigator.clipboard.writeText(pix).then(() => {
      alert("Chave Pix copiada!");
    });
  };

  // Finalizar pedido e abrir WhatsApp
  btnFinalizar.onclick = () => {
    if (carrinho.length === 0) {
      alert("Adicione itens ao carrinho antes de finalizar.");
      return;
    }
    if (!tipoEntregaEl.value) {
      alert("Selecione o tipo de entrega.");
      return;
    }
    if (tipoEntregaEl.value === "delivery" && !document.getElementById("endereco").value.trim()) {
      alert("Preencha o endere√ßo para entrega.");
      return;
    }
    if (tipoEntregaEl.value === "agendamento" && !document.getElementById("data-agendamento").value) {
      alert("Selecione a data e hora do agendamento.");
      return;
    }
    if (!tipoPagamentoEl.value) {
      alert("Selecione a forma de pagamento.");
      return;
    }
    if (tipoPagamentoEl.value === "dinheiro") {
      const trocoVal = document.getElementById("troco-para").value;
      if (trocoVal === "" || Number(trocoVal) < 0) {
        alert("Informe o valor para troco.");
        return;
      }
    }

    let mensagem = "Ol√°, gostaria de fazer um pedido:%0A%0A";
    carrinho.forEach(item => {
      mensagem += `- ${item.nome} (x${item.quantidade})%0A`;
    });

    mensagem += `%0ATipo de entrega: ${tipoEntregaEl.options[tipoEntregaEl.selectedIndex].text}%0A`;

    if (tipoEntregaEl.value === "delivery") {
      mensagem += `Endere√ßo: ${document.getElementById("endereco").value.trim()}%0A`;
    } else if (tipoEntregaEl.value === "retirar") {
      mensagem += "Retirar no balc√£o - Rua das Laranjeiras, 123 - Centro%0A";
    } else if (tipoEntregaEl.value === "agendamento") {
      mensagem += `Agendamento para: ${document.getElementById("data-agendamento").value.replace("T", " ")}%0A`;
    }

    mensagem += `Forma de pagamento: ${tipoPagamentoEl.options[tipoPagamentoEl.selectedIndex].text}%0A`;

    if (tipoPagamentoEl.value === "dinheiro") {
      mensagem += `Troco para: R$ ${parseFloat(document.getElementById("troco-para").value).toFixed(2)}%0A`;
    }

    mensagem += "%0AObrigado!";

    const telefone = "5584986725871"; // coloque seu n√∫mero no formato internacional aqui
    const urlWhatsapp = `https://wa.me/${telefone}?text=${mensagem}`;
    window.open(urlWhatsapp, "_blank");
  };
</script>

</body>
</html>
