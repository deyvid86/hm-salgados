<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Delivery Lanchonete</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
    background: #f5f5f5;
  }
  header {
    background: #ff5722;
    color: white;
    padding: 15px;
    text-align: center;
  }
  #logo {
    max-height: 50px;
    vertical-align: middle;
  }
  #banner {
    width: 100%;
    max-height: 200px;
    object-fit: cover;
  }
  #horario {
    text-align: center;
    background: #333;
    color: white;
    padding: 8px;
  }
  main {
    padding: 15px;
  }
  .categorias {
    display: flex;
    justify-content: center;
    margin-bottom: 15px;
    gap: 10px;
  }
  .categorias button {
    padding: 8px 16px;
    background: #ff5722;
    border: none;
    color: white;
    cursor: pointer;
    border-radius: 20px;
    font-weight: bold;
  }
  .categorias button.active {
    background: #e64a19;
  }
  .produtos {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
    gap: 15px;
  }
  .produto {
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 8px #ddd;
    padding: 10px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .produto img {
    max-width: 100%;
    border-radius: 8px;
    object-fit: cover;
    height: 120px;
  }
  .produto h3 {
    margin: 8px 0 4px 0;
    font-size: 18px;
  }
  .produto p {
    margin: 0 0 8px 0;
    font-size: 14px;
    color: #555;
  }
  .produto button {
    background: #ff5722;
    color: white;
    border: none;
    padding: 8px;
    cursor: pointer;
    border-radius: 6px;
    font-weight: bold;
  }

  /* Bot√£o fixo abrir carrinho */
  #botao-carrinho {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 28px;
    cursor: pointer;
    z-index: 1001;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Badge do contador */
  #badge-carrinho {
    position: absolute;
    top: 5px;
    right: 5px;
    background: red;
    color: white;
    font-size: 14px;
    padding: 2px 6px;
    border-radius: 12px;
  }

  /* Carrinho em tela cheia */
  #carrinho {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: white;
    z-index: 1000;
    padding: 20px;
    box-sizing: border-box;
    display: none; /* come√ßa oculto */
    flex-direction: column;
    overflow-y: auto;
  }

  /* Bot√£o fechar carrinho */
  #fechar-carrinho {
    align-self: flex-end;
    background: transparent;
    border: none;
    font-size: 28px;
    cursor: pointer;
    margin-bottom: 10px;
  }

  /* Itens do carrinho */
  #itens-carrinho {
    flex-grow: 1;
    overflow-y: auto;
    margin-bottom: 15px;
  }
  .item-carrinho {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 8px;
  }
  .item-info {
    flex-grow: 1;
  }
  .item-info p {
    margin: 0 0 4px 0;
    font-size: 14px;
  }
  .controles-quantidade {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .controles-quantidade button {
    background: #ff5722;
    border: none;
    color: white;
    padding: 2px 8px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 4px;
  }
  .remove-item {
    background: transparent;
    border: none;
    color: red;
    font-size: 20px;
    cursor: pointer;
  }

  /* Campos adicionais */
  #opcoes-entrega-pagamento {
    background: #fafafa;
    padding: 15px;
    border-radius: 8px;
  }
  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }
  select, input[type="text"], input[type="datetime-local"], input[type="number"] {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    box-sizing: border-box;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  #campo-endereco, #campo-agendamento, #campo-troco, #campo-pix {
    margin-top: 8px;
  }
  #info-retirada {
    margin-top: 8px;
    background: #eee;
    padding: 10px;
    border-radius: 6px;
  }
  #btn-copiar-pix {
    margin-top: 8px;
    background: #28a745;
    color: white;
    border: none;
    padding: 8px;
    cursor: pointer;
    border-radius: 6px;
  }
  #btn-finalizar {
    margin-top: 15px;
    width: 100%;
    background: #28a745;
    color: white;
    border: none;
    padding: 12px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 8px;
  }

  /* Modal observa√ß√£o */
  #modal-observacao {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
  }
  #modal-conteudo {
    background: white;
    padding: 20px;
    border-radius: 10px;
    width: 90%;
    max-width: 400px;
  }
  #modal-conteudo textarea {
    width: 100%;
    height: 80px;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
    resize: vertical;
  }
  #modal-conteudo button {
    margin-top: 10px;
    background: #ff5722;
    color: white;
    border: none;
    padding: 10px;
    width: 100%;
    font-weight: bold;
    cursor: pointer;
    border-radius: 6px;
  }

  /* Responsividade */
  @media (max-width: 768px) {
    .produtos {
      grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
    }
    #botao-carrinho {
      width: 50px;
      height: 50px;
      font-size: 24px;
    }
    #carrinho {
      padding: 15px;
    }
  }
</style>
</head>
<body>

<header>
  <img src="https://via.placeholder.com/150x50?text=Logo" alt="Logo" id="logo" />
</header>

<img src="https://via.placeholder.com/800x200?text=Banner+Lanchonete" alt="Banner" id="banner" />

<div id="horario">Hor√°rio de Funcionamento: Seg a Sex 10:00 - 22:00 | S√°b 12:00 - 23:00</div>

<main>
  <div class="categorias">
    <button class="active" data-categoria="todos">Todos</button>
    <button data-categoria="hamburguer">Hamb√∫rguer</button>
    <button data-categoria="bebidas">Bebidas</button>
    <button data-categoria="sobremesas">Sobremesas</button>
  </div>

  <div class="produtos" id="produtos"></div>
</main>

<!-- Bot√£o fixo abrir carrinho -->
<button id="botao-carrinho" title="Abrir carrinho">
  üõí <span id="badge-carrinho">0</span>
</button>

<!-- Carrinho tela cheia -->
<div id="carrinho">
  <button id="fechar-carrinho" title="Fechar carrinho">√ó</button>
  <div id="itens-carrinho"></div>

  <div id="opcoes-entrega-pagamento">
    <label for="tipo-entrega">Tipo de Entrega:</label>
    <select id="tipo-entrega">
      <option value="">Selecione...</option>
      <option value="delivery">Delivery</option>
      <option value="retirar">Retirar no balc√£o</option>
      <option value="agendamento">Agendamento</option>
    </select>
    <div id="campo-endereco" style="display:none;">
      <label for="endereco">Endere√ßo para entrega:</label>
      <input type="text" id="endereco" placeholder="Rua, n√∫mero, bairro..." />
    </div>
    <div id="info-retirada" style="display:none;">
      <strong>Endere√ßo para retirar:</strong>
      <p>Rua das Laranjeiras, 123 - Centro</p>
    </div>
    <div id="campo-agendamento" style="display:none;">
      <label for="data-agendamento">Data e hora do agendamento:</label>
      <input type="datetime-local" id="data-agendamento" />
    </div>

    <label for="tipo-pagamento">Forma de Pagamento:</label>
    <select id="tipo-pagamento">
      <option value="">Selecione...</option>
      <option value="pix">Pix</option>
      <option value="cartao-credito">Cart√£o de Cr√©dito</option>
      <option value="cartao-debito">Cart√£o de D√©bito</option>
      <option value="dinheiro">Dinheiro</option>
    </select>
    <div id="campo-troco" style="display:none;">
      <label for="troco-para">Troco para:</label>
      <input type="number" id="troco-para" placeholder="Valor para troco" min="0" step="0.01" />
    </div>
    <div id="campo-pix" style="display:none;">
      <label>Chave Pix:</label>
      <input type="text" readonly value="000.111.222-33" id="chave-pix" />
      <button id="btn-copiar-pix">Copiar chave Pix</button>
    </div>

    <button id="btn-finalizar">Finalizar Pedido</button>
  </div>
</div>

<!-- Modal observa√ß√£o -->
<div id="modal-observacao">
  <div id="modal-conteudo">
    <h3>Observa√ß√£o do produto</h3>
    <textarea id="obs-text"></textarea>
    <button id="btn-adicionar-obs">Adicionar ao carrinho</button>
  </div>
</div>

<script>
  // Dados dos produtos
  const produtos = [
    { id: 1, nome: "X-Burguer", preco: 18.90, categoria: "hamburguer", img: "https://via.placeholder.com/180x120?text=X-Burguer" },
    { id: 2, nome: "X-Salada", preco: 22.50, categoria: "hamburguer", img: "https://via.placeholder.com/180x120?text=X-Salada" },
    { id: 3, nome: "Coca-Cola 350ml", preco: 5.00, categoria: "bebidas", img: "https://via.placeholder.com/180x120?text=Coca-Cola" },
    { id: 4, nome: "Suco Natural", preco: 7.50, categoria: "bebidas", img: "https://via.placeholder.com/180x120?text=Suco" },
    { id: 5, nome: "Sorvete Casquinha", preco: 6.00, categoria: "sobremesas", img: "https://via.placeholder.com/180x120?text=Sorvete" },
    { id: 6, nome: "Milkshake", preco: 10.00, categoria: "sobremesas", img: "https://via.placeholder.com/180x120?text=Milkshake" },
  ];

  const produtosEl = document.getElementById("produtos");
  const categoriasEl = document.querySelectorAll(".categorias button");
  const botaoCarrinho = document.getElementById("botao-carrinho");
  const carrinhoEl = document.getElementById("carrinho");
  const fecharCarrinhoBtn = document.getElementById("fechar-carrinho");
  const itensCarrinhoEl = document.getElementById("itens-carrinho");
  const tipoEntregaEl = document.getElementById("tipo-entrega");
  const campoEnderecoEl = document.getElementById("campo-endereco");
  const infoRetiradaEl = document.getElementById("info-retirada");
  const campoAgendamentoEl = document.getElementById("campo-agendamento");
  const tipoPagamentoEl = document.getElementById("tipo-pagamento");
  const campoTrocoEl = document.getElementById("campo-troco");
  const campoPixEl = document.getElementById("campo-pix");
  const btnCopiarPix = document.getElementById("btn-copiar-pix");
  const btnFinalizar = document.getElementById("btn-finalizar");

  const modalObservacao = document.getElementById("modal-observacao");
  const obsText = document.getElementById("obs-text");
  const btnAdicionarObs = document.getElementById("btn-adicionar-obs");

  let carrinho = [];
  let produtoSelecionado = null;

  // Render produtos por categoria
  function renderProdutos(categoria = "todos") {
    produtosEl.innerHTML = "";
    const filtrados = categoria === "todos" ? produtos : produtos.filter(p => p.categoria === categoria);
    filtrados.forEach(prod => {
      const div = document.createElement("div");
      div.className = "produto";
      div.innerHTML = `
        <img src="${prod.img}" alt="${prod.nome}" />
        <h3>${prod.nome}</h3>
        <p>R$ ${prod.preco.toFixed(2)}</p>
        <button data-id="${prod.id}">Adicionar</button>
      `;
      produtosEl.appendChild(div);
    });

    // Eventos dos bot√µes Adicionar
    produtosEl.querySelectorAll("button").forEach(btn => {
      btn.onclick = () => {
        const id = Number(btn.getAttribute("data-id"));
        produtoSelecionado = produtos.find(p => p.id === id);
        obsText.value = "";
        modalObservacao.style.display = "flex";
      };
    });
  }

  // Adicionar ao carrinho com observa√ß√£o e quantidade = 1
  btnAdicionarObs.onclick = () => {
    if (!produtoSelecionado) return;
    const observacao = obsText.value.trim();
    // Verifica se j√° existe no carrinho (mesmo produto e mesma obs)
    const idx = carrinho.findIndex(item => item.id === produtoSelecionado.id && item.observacao === observacao);
    if (idx > -1) {
      carrinho[idx].quantidade++;
    } else {
      carrinho.push({ ...produtoSelecionado, quantidade: 1, observacao });
    }
    modalObservacao.style.display = "none";
    renderCarrinho();
  };

  // Render carrinho
  function renderCarrinho() {
    itensCarrinhoEl.innerHTML = "";
    carrinho.forEach((item, i) => {
      const div = document.createElement("div");
      div.className = "item-carrinho";
      div.innerHTML = `
        <div class="item-info">
          <p><strong>${item.nome}</strong></p>
          <p>R$ ${item.preco.toFixed(2)} x ${item.quantidade} = R$ ${(item.preco * item.quantidade).toFixed(2)}</p>
          ${item.observacao ? `<p><em>Obs: ${item.observacao}</em></p>` : ""}
        </div>
        <div class="controles-quantidade">
          <button data-index="${i}" class="diminuir">-</button>
          <span>${item.quantidade}</span>
          <button data-index="${i}" class="aumentar">+</button>
          <button data-index="${i}" class="remove-item" title="Remover item">√ó</button>
        </div>
      `;
      itensCarrinhoEl.appendChild(div);
    });

    // Atualiza contador no bot√£o carrinho
    const totalQtd = carrinho.reduce((acc, item) => acc + item.quantidade, 0);
    document.getElementById("badge-carrinho").textContent = totalQtd;

    // Eventos dos bot√µes de quantidade e remo√ß√£o
    itensCarrinhoEl.querySelectorAll(".diminuir").forEach(btn => {
      btn.onclick = () => {
        const idx = Number(btn.getAttribute("data-index"));
        if (carrinho[idx].quantidade > 1) {
          carrinho[idx].quantidade--;
        } else {
          carrinho.splice(idx, 1);
        }
        renderCarrinho();
      };
    });
    itensCarrinhoEl.querySelectorAll(".aumentar").forEach(btn => {
      btn.onclick = () => {
        const idx = Number(btn.getAttribute("data-index"));
        carrinho[idx].quantidade++;
        renderCarrinho();
      };
    });
    itensCarrinhoEl.querySelectorAll(".remove-item").forEach(btn => {
      btn.onclick = () => {
        const idx = Number(btn.getAttribute("data-index"));
        carrinho.splice(idx, 1);
        renderCarrinho();
      };
    });
  }

  // Filtrar por categoria
  categoriasEl.forEach(botao => {
    botao.onclick = () => {
      categoriasEl.forEach(b => b.classList.remove("active"));
      botao.classList.add("active");
      renderProdutos(botao.getAttribute("data-categoria"));
    };
  });

  // Abrir e fechar carrinho
  botaoCarrinho.onclick = () => {
    if (carrinho.length === 0) {
      alert("Carrinho vazio!");
      return;
    }
    carrinhoEl.style.display = "flex";
  };
  fecharCarrinhoBtn.onclick = () => {
    carrinhoEl.style.display = "none";
  };

  // Mostrar campos conforme tipo de entrega
  tipoEntregaEl.onchange = () => {
    const valor = tipoEntregaEl.value;
    campoEnderecoEl.style.display = valor === "delivery" ? "block" : "none";
    infoRetiradaEl.style.display = valor === "retirar" ? "block" : "none";
    campoAgendamentoEl.style.display = valor === "agendamento" ? "block" : "none";
  };

  // Mostrar campos conforme tipo pagamento
  tipoPagamentoEl.onchange = () => {
    const valor = tipoPagamentoEl.value;
    campoTrocoEl.style.display = valor === "dinheiro" ? "block" : "none";
    campoPixEl.style.display = valor === "pix" ? "block" : "none";
  };

  // Copiar chave Pix
  btnCopiarPix.onclick = () => {
    const pix = document.getElementById("chave-pix").value;
    navigator.clipboard.writeText(pix).then(() => {
      alert("Chave Pix copiada!");
    });
  };

  // Finalizar pedido: gera mensagem WhatsApp e abre no WhatsApp Web/APP
  btnFinalizar.onclick = () => {
    if (carrinho.length === 0) {
      alert("Adicione itens ao carrinho antes de finalizar.");
      return;
    }
    if (!tipoEntregaEl.value) {
      alert("Selecione o tipo de entrega.");
      return;
    }
    if (tipoEntregaEl.value === "delivery" && !document.getElementById("endereco").value.trim()) {
      alert("Preencha o endere√ßo para entrega.");
      return;
    }
    if (tipoEntregaEl.value === "agendamento" && !document.getElementById("data-agendamento").value) {
      alert("Selecione a data e hora do agendamento.");
      return;
    }
    if (!tipoPagamentoEl.value) {
      alert("Selecione a forma de pagamento.");
      return;
    }
    if (tipoPagamentoEl.value === "dinheiro") {
      const trocoVal = document.getElementById("troco-para").value;
      if (trocoVal === "" || Number(trocoVal) < 0) {
        alert("Informe o valor para troco.");
        return;
      }
    }

    // Monta mensagem
    let mensagem = "Ol√°, gostaria de fazer um pedido:%0A%0A";
    carrinho.forEach(item => {
      mensagem += `- ${item.nome} (x${item.quantidade})`;
      if (item.observacao) mensagem += ` (Obs: ${item.observacao})`;
      mensagem += `%0A`;
    });

    mensagem += `%0ATipo de entrega: ${tipoEntregaEl.options[tipoEntregaEl.selectedIndex].text}%0A`;
    if (tipoEntregaEl.value === "delivery") {
      mensagem += `Endere√ßo: ${document.getElementById("endereco").value.trim()}%0A`;
    } else if (tipoEntregaEl.value === "retirar") {
      mensagem += `Retirar no balc√£o - Rua das Laranjeiras, 123 - Centro%0A`;
    } else if (tipoEntregaEl.value === "agendamento") {
      mensagem += `Agendamento para: ${document.getElementById("data-agendamento").value.replace("T", " ")}%0A`;
    }
    mensagem += `Forma de pagamento: ${tipoPagamentoEl.options[tipoPagamentoEl.selectedIndex].text}%0A`;
    if (tipoPagamentoEl.value === "dinheiro") {
      mensagem += `Troco para: R$ ${parseFloat(document.getElementById("troco-para").value).toFixed(2)}%0A`;
    }
    mensagem += `%0AObrigado!`;

    const telefone = "5584986725871"; // Coloque seu n√∫mero aqui no formato internacional (ex: 55+DDD+N√∫mero)
    const urlWhatsapp = `https://wa.me/${telefone}?text=${mensagem}`;
    window.open(urlWhatsapp, "_blank");
  };

  // Fechar modal observa√ß√£o clicando fora
  modalObservacao.onclick = (e) => {
    if (e.target === modalObservacao) {
      modalObservacao.style.display = "none";
    }
  };

  // Inicializa√ß√£o
  renderProdutos();
  renderCarrinho();
</script>

</body>
</html>
