<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lanchonete Delivery - Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .admin-sidebar {
            transition: all 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .tab-active {
            border-bottom: 3px solid #f59e0b;
            color: #f59e0b;
            font-weight: 600;
        }
        .status-active {
            background-color: #10b981;
        }
        .status-inactive {
            background-color: #ef4444;
        }
        .flavor-tag {
            display: inline-flex;
            align-items: center;
            background-color: #f3f4f6;
            border-radius: 9999px;
            padding: 0.25rem 0.75rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        .flavor-tag-remove {
            margin-left: 0.25rem;
            cursor: pointer;
            color: #6b7280;
        }
        .flavor-tag-remove:hover {
            color: #ef4444;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Admin Sidebar -->
    <div id="admin-sidebar" class="admin-sidebar fixed inset-y-0 left-0 w-64 bg-gray-800 text-white shadow-lg z-50">
        <div class="p-4 flex items-center border-b border-gray-700">
            <img src="https://i.pinimg.com/736x/b1/0f/31/b10f318e195294eda257cfb1dd7917a7.jpg" alt="Logo" class="h-10 w-10 rounded-full">
            <h1 class="ml-3 text-xl font-bold">HM Salgados</h1>
            <button id="close-sidebar" class="ml-auto text-gray-400 hover:text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="p-4">
            <div class="mb-6">
                <h3 class="text-xs uppercase font-semibold text-gray-400 mb-3">Menu Admin</h3>
                <ul>
                    <li>
                        <button id="products-tab" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700 tab-active">
                            <i class="fas fa-box-open mr-3"></i> Produtos
                        </button>
                    </li>
                    <li>
                        <button id="orders-tab" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700">
                            <i class="fas fa-clipboard-list mr-3"></i> Pedidos
                        </button>
                    </li>
                    <li>
                        <button id="stats-tab" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700">
                            <i class="fas fa-chart-line mr-3"></i> Estatísticas
                        </button>
                    </li>
                </ul>
            </div>
            <div class="mb-6">
                <h3 class="text-xs uppercase font-semibold text-gray-400 mb-3">Configurações</h3>
                <ul>
                    <li>
                        <button class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700">
                            <i class="fas fa-users-cog mr-3"></i> Usuários
                        </button>
                    </li>
                    <li>
                        <button class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700">
                            <i class="fas fa-cog mr-3"></i> Configurações
                        </button>
                    </li>
                </ul>
            </div>
            <div class="pt-4 border-t border-gray-700">
                <button class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700 text-red-400 hover:text-red-300">
                    <i class="fas fa-sign-out-alt mr-3"></i> Sair
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Main Content -->
    <div class="ml-0 md:ml-64 transition-all duration-300">
        <!-- Admin Header -->
        <header class="bg-white shadow-md py-4 px-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <button id="toggle-sidebar" class="mr-4 text-gray-700 hover:text-gray-900 md:hidden">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h2 class="text-xl font-bold text-gray-800" id="admin-page-title">Gerenciar Produtos</h2>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <button class="bg-gray-100 hover:bg-gray-200 rounded-full p-2 text-gray-700">
                            <i class="fas fa-bell"></i>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
                        </button>
                    </div>
                    <div class="flex items-center">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="h-8 w-8 rounded-full">
                        <span class="ml-2 text-sm font-medium hidden md:inline">Admin</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Admin Content -->
        <main class="p-6">
            <!-- Products Management Section -->
            <div id="products-section">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">Todos os Produtos</h3>
                        <p class="text-sm text-gray-500">Gerencie seu cardápio</p>
                    </div>
                    <button id="add-product-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                        <i class="fas fa-plus mr-2"></i> Adicionar Produto
                    </button>
                </div>

                <!-- Products Filter -->
                <div class="bg-white rounded-lg shadow p-4 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Categoria</label>
                            <select id="category-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option value="all">Todas categorias</option>
                                <option value="salgadinhos fritos">Salgadinhos Fritos</option>
                                <option value="salgadinhos assados">Salgadinhos Assados</option>
                                <option value="combos">Combos</option>
                                <option value="Bebidas">Bebidas</option>
                                <option value="salgadinhos congelado">Salgadinhos Congelados</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                            <select id="status-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option value="all">Todos status</option>
                                <option value="active">Ativos</option>
                                <option value="inactive">Inativos</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Buscar</label>
                            <div class="relative">
                                <input type="text" id="product-search" placeholder="Buscar produtos..." class="w-full px-3 py-2 border border-gray-300 rounded-md pl-10">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="admin-products-grid">
                    <!-- Product cards will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Orders Management Section (Hidden by default) -->
            <div id="orders-section" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">Pedidos Recentes</h3>
                        <p class="text-sm text-gray-500">Gerencie os pedidos dos clientes</p>
                    </div>
                    <div class="flex space-x-2">
                        <button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-md text-sm font-medium">
                            <i class="fas fa-filter mr-1"></i> Filtrar
                        </button>
                        <button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-md text-sm font-medium">
                            <i class="fas fa-download mr-1"></i> Exportar
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#1001</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">João Silva</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10/06/2023 14:30</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">R$ 45,50</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Entregue</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-blue-600 hover:text-blue-900 mr-3"><i class="fas fa-eye"></i></button>
                                    <button class="text-yellow-600 hover:text-yellow-900"><i class="fas fa-edit"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#1000</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Maria Souza</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10/06/2023 12:15</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">R$ 32,00</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Em preparo</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-blue-600 hover:text-blue-900 mr-3"><i class="fas fa-eye"></i></button>
                                    <button class="text-yellow-600 hover:text-yellow-900"><i class="fas fa-edit"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#999</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Carlos Oliveira</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">09/06/2023 18:45</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">R$ 67,50</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">A caminho</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-blue-600 hover:text-blue-900 mr-3"><i class="fas fa-eye"></i></button>
                                    <button class="text-yellow-600 hover:text-yellow-900"><i class="fas fa-edit"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Stats Section (Hidden by default) -->
            <div id="stats-section" class="hidden">
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-800">Estatísticas de Vendas</h3>
                    <p class="text-sm text-gray-500">Acompanhe o desempenho do seu negócio</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Vendas Hoje</p>
                                <p class="text-2xl font-bold text-gray-800">R$ 1.245,80</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-chart-line text-green-600"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <span class="text-green-600 text-sm font-medium">+12%</span>
                            <span class="text-gray-500 text-sm ml-1">vs ontem</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Pedidos Hoje</p>
                                <p class="text-2xl font-bold text-gray-800">24</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fas fa-shopping-cart text-blue-600"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <span class="text-green-600 text-sm font-medium">+5%</span>
                            <span class="text-gray-500 text-sm ml-1">vs ontem</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Ticket Médio</p>
                                <p class="text-2xl font-bold text-gray-800">R$ 51,90</p>
                            </div>
                            <div class="bg-yellow-100 p-3 rounded-full">
                                <i class="fas fa-receipt text-yellow-600"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <span class="text-green-600 text-sm font-medium">+7%</span>
                            <span class="text-gray-500 text-sm ml-1">vs ontem</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="font-medium text-gray-800">Vendas nos últimos 7 dias</h4>
                        <button class="text-sm text-blue-600 hover:text-blue-800">Ver detalhes</button>
                    </div>
                    <div class="h-64">
                        <!-- Chart placeholder -->
                        <div class="flex items-center justify-center h-full bg-gray-50 rounded-lg">
                            <p class="text-gray-500">Gráfico de vendas</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-medium text-gray-800">Produtos mais vendidos</h4>
                            <button class="text-sm text-blue-600 hover:text-blue-800">Ver todos</button>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <div class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center mr-3">
                                    <i class="fas fa-hamburger text-yellow-600 text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Coxinha de Frango</p>
                                    <p class="text-xs text-gray-500">45 vendas</p>
                                </div>
                                <span class="text-sm font-medium">R$ 1,35</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                                    <i class="fas fa-wine-bottle text-blue-600 text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Coca Cola 2L</p>
                                    <p class="text-xs text-gray-500">32 vendas</p>
                                </div>
                                <span class="text-sm font-medium">R$ 14,00</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-3">
                                    <i class="fas fa-boxes text-green-600 text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Combo de 30 Salgados</p>
                                    <p class="text-xs text-gray-500">28 vendas</p>
                                </div>
                                <span class="text-sm font-medium">R$ 40,50</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-medium text-gray-800">Categorias mais vendidas</h4>
                            <button class="text-sm text-blue-600 hover:text-blue-800">Ver todas</button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Salgadinhos Fritos</span>
                                    <span>42%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 42%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Combos</span>
                                    <span>35%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 35%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Bebidas</span>
                                    <span>18%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 18%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Product Modal (Add/Edit) -->
    <div id="product-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                    <h3 id="modal-title" class="text-xl font-bold text-gray-800">Adicionar Produto</h3>
                    <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <form id="product-form">
                    <input type="hidden" id="product-id" value="">
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Produto</label>
                        <input type="text" id="product-name" class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Descrição</label>
                        <textarea id="product-description" class="w-full px-3 py-2 border border-gray-300 rounded-md" rows="2"></textarea>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Preço (R$)</label>
                            <input type="number" id="product-price" step="0.01" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Categoria</label>
                            <select id="product-category" class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
                                <option value="salgadinhos fritos">Salgadinhos Fritos</option>
                                <option value="salgadinhos assados">Salgadinhos Assados</option>
                                <option value="combos">Combos</option>
                                <option value="Bebidas">Bebidas</option>
                                <option value="salgadinhos congelado">Salgadinhos Congelados</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Imagem do Produto</label>
                        <div class="flex items-center">
                            <div class="w-16 h-16 bg-gray-200 rounded-lg overflow-hidden mr-3" id="product-image-preview">
                                <img id="image-preview" src="" alt="" class="w-full h-full object-cover hidden">
                            </div>
                            <div class="flex-1">
                                <input type="file" id="product-image" class="hidden" accept="image/*">
                                <button type="button" id="upload-image-btn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-md text-sm font-medium">
                                    <i class="fas fa-upload mr-1"></i> Enviar imagem
                                </button>
                                <p class="text-xs text-gray-500 mt-1">JPG, PNG (max 2MB)</p>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="product-status" value="active" class="form-radio h-4 w-4 text-green-600" checked>
                                <span class="ml-2">Ativo</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="product-status" value="inactive" class="form-radio h-4 w-4 text-red-600">
                                <span class="ml-2">Inativo</span>
                            </label>
                        </div>
                    </div>

                    <!-- Flavor Options (for combos and drinks) -->
                    <div id="flavor-section" class="mb-4 hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Sabores Disponíveis</label>
                        <div id="selected-flavors" class="flex flex-wrap mb-2"></div>
                        <div class="flex">
                            <input type="text" id="new-flavor" placeholder="Adicionar sabor" class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md">
                            <button type="button" id="add-flavor-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded-r-md">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Adicione os sabores disponíveis para este produto</p>
                        
                        <div class="mt-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Limite de sabores</label>
                            <input type="number" id="flavor-limit" min="1" value="3" class="w-20 px-3 py-2 border border-gray-300 rounded-md">
                        </div>
                    </div>

                    <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
                        <button type="button" id="cancel-product-btn" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            Cancelar
                        </button>
                        <button type="submit" id="save-product-btn" class="px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md font-medium">
                            Salvar Produto
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
            <div class="flex justify-between items-start mb-4">
                <h3 id="confirm-title" class="text-xl font-bold text-gray-800">Confirmar ação</h3>
                <button id="close-confirm-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <p id="confirm-message" class="mb-6">Tem certeza que deseja excluir este produto?</p>
            <div class="flex justify-end space-x-3">
                <button id="cancel-confirm-btn" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                    Cancelar
                </button>
                <button id="confirm-action-btn" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md font-medium">
                    Confirmar
                </button>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

    <script>
        // Sample product data (same as in your main app)
        let products = [
            {
                id: 2,
                name: "Bolinha de Queijo",
                price: 1.35,
                category: "salgadinhos fritos",
                description: "Bolinha crocante recheada com queijo mussarela.",
                image: "https://i.panelinha.com.br/i1/bk-2056-bolinha-de-queijo.webp",
                status: "active"
            },
            {
                id: 3,
                name: "Risole de Milho",
                price: 1.35,
                category: "salgadinhos fritos",
                description: "Massa macia recheada com creme de milho.",
                image: "https://img.cybercook.com.br/imagens/receitas/313/risoles-de-milho-cremoso.jpeg",
                status: "active"
            },
            {
                id: 18,
                name: "Combo de 20 Salgados",
                price: 27.00,
                category: "combos",
                description: "Escolha 2 sabores diferentes de salgados",
                image: "https://instadelivery-public.nyc3.cdn.digitaloceanspaces.com/itens/169574637665130948b1e15_75_75.jpeg",
                flavors: ["Coxinha de Frango", "Bolinha de Queijo", "Risole de Milho", "Bolinha de Pizza"],
                flavorLimit: 2,
                status: "active"
            },
            {
                id: 23,
                name: "Suco de Caixinha 1L",
                price: 9.00,
                category: "Bebidas",
                description: "Uva, Maracujá, Caju, Pêssego",
                image: "https://http2.mlstatic.com/D_NQ_NP_932831-MLA81261642038_122024-O.webp",
                flavors: ["Uva", "Maracujá", "Caju", "Pêssego"],
                flavorLimit: 1,
                status: "active"
            },
            {
                id: 25,
                name: "Pacote de Bolinha de Queijo Congelado",
                price: 27.00,
                category: "salgadinhos congelado",
                description: "20 unidades.",
                image: "https://thumb-cdn.soluall.net/prod/shp_products/sp1280fw/84ce412c-9280-49f4-aeba-93d5185516f5/a217b4c1-05ef-46b6-8ea9-e49a8139cab6.jpeg",
                status: "inactive"
            }
        ];

        // DOM Elements
        const adminSidebar = document.getElementById('admin-sidebar');
        const toggleSidebarBtn = document.getElementById('toggle-sidebar');
        const closeSidebarBtn = document.getElementById('close-sidebar');
        const productsTab = document.getElementById('products-tab');
        const ordersTab = document.getElementById('orders-tab');
        const statsTab = document.getElementById('stats-tab');
        const productsSection = document.getElementById('products-section');
        const ordersSection = document.getElementById('orders-section');
        const statsSection = document.getElementById('stats-section');
        const adminPageTitle = document.getElementById('admin-page-title');
        const adminProductsGrid = document.getElementById('admin-products-grid');
        const categoryFilter = document.getElementById('category-filter');
        const statusFilter = document.getElementById('status-filter');
        const productSearch = document.getElementById('product-search');
        const addProductBtn = document.getElementById('add-product-btn');
        const productModal = document.getElementById('product-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const cancelProductBtn = document.getElementById('cancel-product-btn');
        const productForm = document.getElementById('product-form');
        const productIdInput = document.getElementById('product-id');
        const productNameInput = document.getElementById('product-name');
        const productDescriptionInput = document.getElementById('product-description');
        const productPriceInput = document.getElementById('product-price');
        const productCategoryInput = document.getElementById('product-category');
        const productStatusInputs = document.querySelectorAll('input[name="product-status"]');
        const productImageInput = document.getElementById('product-image');
        const uploadImageBtn = document.getElementById('upload-image-btn');
        const imagePreview = document.getElementById('image-preview');
        const productImagePreview = document.getElementById('product-image-preview');
        const overlay = document.getElementById('overlay');
        const modalTitle = document.getElementById('modal-title');
        const saveProductBtn = document.getElementById('save-product-btn');
        const flavorSection = document.getElementById('flavor-section');
        const selectedFlavorsContainer = document.getElementById('selected-flavors');
        const newFlavorInput = document.getElementById('new-flavor');
        const addFlavorBtn = document.getElementById('add-flavor-btn');
        const flavorLimitInput = document.getElementById('flavor-limit');
        const confirmModal = document.getElementById('confirm-modal');
        const closeConfirmModalBtn = document.getElementById('close-confirm-modal');
        const confirmTitle = document.getElementById('confirm-title');
        const confirmMessage = document.getElementById('confirm-message');
        const cancelConfirmBtn = document.getElementById('cancel-confirm-btn');
        const confirmActionBtn = document.getElementById('confirm-action-btn');

        // State variables
        let currentTab = 'products';
        let currentProductToDelete = null;
        let selectedFlavors = [];
        let currentAction = '';
        let currentProductForAction = null;

        // Initialize the admin panel
        function initAdmin() {
            renderProducts();
            setupEventListeners();
        }

        // Render products based on filters
        function renderProducts(category = 'all', status = 'all', searchTerm = '') {
            adminProductsGrid.innerHTML = '';

            let filteredProducts = products;

            // Filter by category
            if (category !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === category);
            }

            // Filter by status
            if (status !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.status === status);
            }

            // Filter by search term
            if (searchTerm) {
                const term = searchTerm.toLowerCase();
                filteredProducts = filteredProducts.filter(product => 
                    product.name.toLowerCase().includes(term) || 
                    product.description.toLowerCase().includes(term)
                );
            }

            if (filteredProducts.length === 0) {
                adminProductsGrid.innerHTML = `
                    <div class="col-span-full text-center py-10">
                        <i class="fas fa-box-open text-4xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">Nenhum produto encontrado</p>
                        ${searchTerm ? `<p class="text-sm mt-2">Tente ajustar seus filtros de busca</p>` : ''}
                    </div>
                `;
                return;
            }

            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card bg-white rounded-lg shadow-md overflow-hidden transition-transform duration-300';
                productCard.innerHTML = `
                    <div class="relative">
                        <div class="h-40 overflow-hidden">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                        </div>
                        <span class="absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium text-white ${product.status === 'active' ? 'status-active' : 'status-inactive'}">
                            ${product.status === 'active' ? 'Ativo' : 'Inativo'}
                        </span>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-1 truncate">${product.name}</h3>
                        <p class="text-gray-600 text-sm mb-2 line-clamp-2">${product.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-yellow-600 font-bold">R$ ${product.price.toFixed(2)}</span>
                            <div class="flex space-x-2">
                                <button class="edit-product-btn bg-blue-100 hover:bg-blue-200 text-blue-600 p-1 rounded-md" data-id="${product.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-product-btn bg-red-100 hover:bg-red-200 text-red-600 p-1 rounded-md" data-id="${product.id}">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                adminProductsGrid.appendChild(productCard);
            });

            // Add event listeners to the new buttons
            document.querySelectorAll('.edit-product-btn').forEach(btn => {
                btn.addEventListener('click', () => openEditProductModal(parseInt(btn.dataset.id)));
            });

            document.querySelectorAll('.delete-product-btn').forEach(btn => {
                btn.addEventListener('click', () => confirmDeleteProduct(parseInt(btn.dataset.id)));
            });
        }

        // Open modal to add new product
        function openAddProductModal() {
            modalTitle.textContent = 'Adicionar Produto';
            productForm.reset();
            productIdInput.value = '';
            imagePreview.src = '';
            imagePreview.classList.add('hidden');
            selectedFlavors = [];
            selectedFlavorsContainer.innerHTML = '';
            flavorSection.classList.add('hidden');
            
            // Reset status to active
            document.querySelector('input[name="product-status"][value="active"]').checked = true;
            
            productModal.classList.remove('hidden');
            overlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Open modal to edit product
        function openEditProductModal(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            modalTitle.textContent = 'Editar Produto';
            productIdInput.value = product.id;
            productNameInput.value = product.name;
            productDescriptionInput.value = product.description;
            productPriceInput.value = product.price;
            productCategoryInput.value = product.category;
            
            // Set status
            document.querySelector(`input[name="product-status"][value="${product.status}"]`).checked = true;
            
            // Set image preview if exists
            if (product.image) {
                imagePreview.src = product.image;
                imagePreview.classList.remove('hidden');
            } else {
                imagePreview.classList.add('hidden');
            }
            
            // Handle flavors for combos and drinks
            if ((product.category === 'combos' || product.category === 'Bebidas') && product.flavors) {
                flavorSection.classList.remove('hidden');
                selectedFlavors = [...product.flavors];
                flavorLimitInput.value = product.flavorLimit || 3;
                renderSelectedFlavors();
            } else {
                flavorSection.classList.add('hidden');
                selectedFlavors = [];
            }
            
            productModal.classList.remove('hidden');
            overlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Render selected flavors as tags
        function renderSelectedFlavors() {
            selectedFlavorsContainer.innerHTML = '';
            selectedFlavors.forEach((flavor, index) => {
                const tag = document.createElement('div');
                tag.className = 'flavor-tag';
                tag.innerHTML = `
                    ${flavor}
                    <span class="flavor-tag-remove" data-index="${index}">
                        <i class="fas fa-times"></i>
                    </span>
                `;
                selectedFlavorsContainer.appendChild(tag);
            });

            // Add event listeners to remove buttons
            document.querySelectorAll('.flavor-tag-remove').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const index = parseInt(btn.dataset.index);
                    selectedFlavors.splice(index, 1);
                    renderSelectedFlavors();
                });
            });
        }

        // Save product (add or update)
        function saveProduct(e) {
            e.preventDefault();
            
            const id = productIdInput.value ? parseInt(productIdInput.value) : Math.max(...products.map(p => p.id), 0) + 1;
            const name = productNameInput.value;
            const description = productDescriptionInput.value;
            const price = parseFloat(productPriceInput.value);
            const category = productCategoryInput.value;
            const status = document.querySelector('input[name="product-status"]:checked').value;
            const image = imagePreview.src || '';
            
            // For combos and drinks, include flavors
            let flavors = [];
            let flavorLimit = 3;
            if (category === 'combos' || category === 'Bebidas') {
                flavors = [...selectedFlavors];
                flavorLimit = parseInt(flavorLimitInput.value) || 3;
            }
            
            if (productIdInput.value) {
                // Update existing product
                const index = products.findIndex(p => p.id === id);
                if (index !== -1) {
                    products[index] = {
                        id,
                        name,
                        description,
                        price,
                        category,
                        status,
                        image,
                        ...(category === 'combos' || category === 'Bebidas' ? { flavors, flavorLimit } : {})
                    };
                }
            } else {
                // Add new product
                products.push({
                    id,
                    name,
                    description,
                    price,
                    category,
                    status,
                    image,
                    ...(category === 'combos' || category === 'Bebidas' ? { flavors, flavorLimit } : {})
                });
            }
            
            renderProducts(
                categoryFilter.value,
                statusFilter.value,
                productSearch.value
            );
            
            closeProductModal();
        }

        // Confirm delete product
        function confirmDeleteProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            currentProductToDelete = productId;
            confirmTitle.textContent = 'Confirmar Exclusão';
            confirmMessage.textContent = `Tem certeza que deseja excluir o produto "${product.name}"?`;
            currentAction = 'delete';
            currentProductForAction = productId;
            
            confirmModal.classList.remove('hidden');
            overlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Delete product
        function deleteProduct() {
            products = products.filter(p => p.id !== currentProductToDelete);
            renderProducts(
                categoryFilter.value,
                statusFilter.value,
                productSearch.value
            );
            closeConfirmModal();
        }

        // Toggle product status (active/inactive)
        function toggleProductStatus(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                product.status = product.status === 'active' ? 'inactive' : 'active';
                renderProducts(
                    categoryFilter.value,
                    statusFilter.value,
                    productSearch.value
                );
            }
        }

        // Close product modal
        function closeProductModal() {
            productModal.classList.add('hidden');
            overlay.classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Close confirm modal
        function closeConfirmModal() {
            confirmModal.classList.add('hidden');
            overlay.classList.add('hidden');
            document.body.style.overflow = '';
            currentProductToDelete = null;
        }

        // Toggle sidebar on mobile
        function toggleSidebar() {
            adminSidebar.classList.toggle('-translate-x-full');
            adminSidebar.classList.toggle('md:-translate-x-0');
        }

        // Switch tabs
        function switchTab(tab) {
            currentTab = tab;
            
            // Update active tab button
            productsTab.classList.remove('tab-active');
            ordersTab.classList.remove('tab-active');
            statsTab.classList.remove('tab-active');
            
            // Hide all sections
            productsSection.classList.add('hidden');
            ordersSection.classList.add('hidden');
            statsSection.classList.add('hidden');
            
            // Show selected section
            if (tab === 'products') {
                productsTab.classList.add('tab-active');
                productsSection.classList.remove('hidden');
                adminPageTitle.textContent = 'Gerenciar Produtos';
            } else if (tab === 'orders') {
                ordersTab.classList.add('tab-active');
                ordersSection.classList.remove('hidden');
                adminPageTitle.textContent = 'Gerenciar Pedidos';
            } else if (tab === 'stats') {
                statsTab.classList.add('tab-active');
                statsSection.classList.remove('hidden');
                adminPageTitle.textContent = 'Estatísticas de Vendas';
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Sidebar toggle
            toggleSidebarBtn.addEventListener('click', toggleSidebar);
            closeSidebarBtn.addEventListener('click', toggleSidebar);
            
            // Tabs
            productsTab.addEventListener('click', () => switchTab('products'));
            ordersTab.addEventListener('click', () => switchTab('orders'));
            statsTab.addEventListener('click', () => switchTab('stats'));
            
            // Filters
            categoryFilter.addEventListener('change', () => {
                renderProducts(
                    categoryFilter.value,
                    statusFilter.value,
                    productSearch.value
                );
            });
            
            statusFilter.addEventListener('change', () => {
                renderProducts(
                    categoryFilter.value,
                    statusFilter.value,
                    productSearch.value
                );
            });
            
            productSearch.addEventListener('input', () => {
                renderProducts(
                    categoryFilter.value,
                    statusFilter.value,
                    productSearch.value
                );
            });
            
            // Add product button
            addProductBtn.addEventListener('click', openAddProductModal);
            
            // Product modal
            closeModalBtn.addEventListener('click', closeProductModal);
            cancelProductBtn.addEventListener('click', closeProductModal);
            productForm.addEventListener('submit', saveProduct);
            
            // Image upload
            uploadImageBtn.addEventListener('click', () => productImageInput.click());
            productImageInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        imagePreview.src = event.target.result;
                        imagePreview.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Confirm modal
            closeConfirmModalBtn.addEventListener('click', closeConfirmModal);
            cancelConfirmBtn.addEventListener('click', closeConfirmModal);
            confirmActionBtn.addEventListener('click', () => {
                if (currentAction === 'delete') {
                    deleteProduct();
                }
            });
            
            // Category change - show/hide flavor section
            productCategoryInput.addEventListener('change', () => {
                if (productCategoryInput.value === 'combos' || productCategoryInput.value === 'Bebidas') {
                    flavorSection.classList.remove('hidden');
                } else {
                    flavorSection.classList.add('hidden');
                }
            });
            
            // Add flavor button
            addFlavorBtn.addEventListener('click', () => {
                const flavor = newFlavorInput.value.trim();
                if (flavor && !selectedFlavors.includes(flavor)) {
                    selectedFlavors.push(flavor);
                    renderSelectedFlavors();
                    newFlavorInput.value = '';
                }
            });
            
            // Allow adding flavor with Enter key
            newFlavorInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addFlavorBtn.click();
                }
            });
        }

        // Initialize the admin panel
        initAdmin();
    </script>
</body>
</html>
